(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{7810:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var i=r(2898);let a=(0,i.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3505:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var i=r(2898);let a=(0,i.Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},4912:function(e,t,r){Promise.resolve().then(r.bind(r,9212))},9212:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ShopPage}});var i=r(7437),a=r(2265),n=r(732),s=r(1396),o=r.n(s),l=r(9598),u=r(3611),d=r(7810),c=r(3505),f=r(6630),m=r(2254),g=r(7323),h=r(4841);async function toggleWishlist(e,t){if(!h.O)throw Error("Supabase not configured");let{data:r}=await h.O.from("wishlist").select("product_id").eq("user_id",t).eq("product_id",e).maybeSingle();return r?(await h.O.from("wishlist").delete().eq("user_id",t).eq("product_id",e),{wished:!1}):(await h.O.from("wishlist").insert({user_id:t,product_id:e}),{wished:!0})}async function fetchWishlist(e){if(!h.O)return[];let{data:t}=await h.O.from("wishlist").select("product_id").eq("user_id",e);return(null!=t?t:[]).map(e=>e.product_id)}function ProductCard(e){var t,r,s,h;let{product:p,index:v=0}=e,{addItem:y}=(0,m.useCart)(),{user:x}=(0,g.useAuth)(),[b,w]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{if(x){let e=await fetchWishlist(x.id);w(e.includes(p.id))}else w(!1)})()},[x,p.id]),(0,i.jsx)(n.E.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.06*v},viewport:{once:!0},children:(0,i.jsxs)(l.Zb,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-gray-50 to-white overflow-hidden relative",children:[(null===(t=p.badges)||void 0===t?void 0:t[0])&&(0,i.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,i.jsx)("span",{className:"bg-yellow-400 text-white px-3 py-1 rounded-full text-xs font-semibold",children:p.badges[0]})}),(0,i.jsx)(l.Ol,{className:"pb-4",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(n.E.div,{whileHover:{scale:1.05},className:"w-full h-48 bg-gradient-to-br ".concat(null!==(r=p.gradientFrom)&&void 0!==r?r:"from-gray-200"," ").concat(null!==(s=p.gradientTo)&&void 0!==s?s:"to-gray-300"," rounded-lg flex items-center justify-center text-6xl shadow-lg"),children:null!==(h=p.imageEmoji)&&void 0!==h?h:"\uD83E\uDDB7"}),(0,i.jsx)("button",{onClick:async()=>{if(!x)return alert("Please sign in to manage wishlist");let e=await toggleWishlist(p.id,x.id);w(e.wished)},"aria-label":"Toggle wishlist",className:"absolute top-2 left-2 p-2 bg-white/80 backdrop-blur-sm rounded-full hover:bg-white transition-colors duration-200",children:(0,i.jsx)(d.Z,{className:"w-5 h-5 ".concat(b?"fill-pink-500 text-pink-500":"text-gray-600")})})]})}),(0,i.jsxs)(l.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(o(),{href:"/product/".concat(p.slug),children:(0,i.jsx)(l.ll,{className:"text-lg font-semibold text-gray-900 mb-1 hover:underline",children:p.name})}),(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:p.description})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(f.Z,{rating:p.rating}),(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:[p.rating," (",p.reviews,")"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",p.price]}),(0,i.jsxs)(u.z,{onClick:()=>y({id:p.id,name:p.name,price:p.price,quantity:1,image:p.imageEmoji,flavor:p.flavor}),variant:"smiley",size:"sm",className:"group",children:[(0,i.jsx)(c.Z,{className:"w-4 h-4 mr-2 group-hover:scale-110 transition-transform"}),"Add to Cart"]})]})]})]})})}var p=r(2355);let v=Array.from(new Set(p.bQ.map(e=>e.flavor))),y=Array.from(new Set(p.bQ.map(e=>e.type)));function ShopPage(){let[e,t]=(0,a.useState)("All"),[r,s]=(0,a.useState)("All"),[o,l]=(0,a.useState)(""),u=(0,a.useMemo)(()=>p.bQ.filter(t=>{let i="All"===e||t.flavor===e,a="All"===r||t.type===r,n=!o||t.name.toLowerCase().includes(o.toLowerCase());return i&&a&&n}),[e,r,o]);return(0,i.jsx)("main",{className:"pt-24 pb-20",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,i.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-10",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Shop SMILEY"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Playful, dentist-approved products for the whole family"})]}),(0,i.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-10",children:[(0,i.jsx)("input",{value:o,onChange:e=>l(e.target.value),placeholder:"Search products...",className:"w-full px-4 py-3 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-orange-300"}),(0,i.jsxs)("select",{value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-pink-300",children:[(0,i.jsx)("option",{children:"All"}),v.map(e=>(0,i.jsx)("option",{children:e},e))]}),(0,i.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"w-full px-4 py-3 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-300",children:[(0,i.jsx)("option",{children:"All"}),y.map(e=>(0,i.jsx)("option",{children:e},e))]})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map((e,t)=>(0,i.jsx)(ProductCard,{product:e,index:t},e.id))})]})})}},7323:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var i=r(7437),a=r(2265),n=r(4841);let s=(0,a.createContext)(null);function AuthProvider(e){let{children:t}=e,[r,o]=(0,a.useState)(null),[l,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!n.O){u(!1);return}let e=!0;(async()=>{let{data:t}=await n.O.auth.getSession();if(e){var r,i;o(null!==(i=null===(r=t.session)||void 0===r?void 0:r.user)&&void 0!==i?i:null),u(!1)}})();let{data:t}=n.O.auth.onAuthStateChange((e,t)=>{var r;o(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null)});return()=>{e=!1,t.subscription.unsubscribe()}},[]);let signIn=async(e,t)=>{if(!n.O)return{error:"Supabase not configured"};let{error:r}=await n.O.auth.signInWithPassword({email:e,password:t});return{error:null==r?void 0:r.message}},signUp=async(e,t)=>{if(!n.O)return{error:"Supabase not configured"};let{error:r}=await n.O.auth.signUp({email:e,password:t});return{error:null==r?void 0:r.message}},signOut=async()=>{n.O&&await n.O.auth.signOut()},d=(0,a.useMemo)(()=>({user:r,loading:l,signIn,signUp,signOut}),[r,l]);return(0,i.jsx)(s.Provider,{value:d,children:t})}function useAuth(){let e=(0,a.useContext)(s);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},2254:function(e,t,r){"use strict";r.r(t),r.d(t,{CartProvider:function(){return CartProvider},useCart:function(){return useCart}});var i=r(7437),a=r(2265);let n=(0,a.createContext)(null),s="smiley_cart_v1";function CartProvider(e){let{children:t}=e,[r,o]=(0,a.useState)([]);(0,a.useEffect)(()=>{try{let e=localStorage.getItem(s);e&&o(JSON.parse(e))}catch(e){}},[]),(0,a.useEffect)(()=>{try{localStorage.setItem(s,JSON.stringify(r))}catch(e){}},[r]);let l=(0,a.useMemo)(()=>r.reduce((e,t)=>e+t.price*t.quantity,0),[r]),u=(0,a.useMemo)(()=>r.reduce((e,t)=>e+t.quantity,0),[r]);return(0,i.jsx)(n.Provider,{value:{items:r,addItem:e=>{o(t=>{let r=t.find(t=>t.id===e.id);return r?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+e.quantity}:t):[...t,e]})},removeItem:e=>o(t=>t.filter(t=>t.id!==e)),updateQuantity:(e,t)=>o(r=>r.map(r=>r.id===e?{...r,quantity:t}:r)),clear:()=>o([]),subtotal:l,itemCount:u},children:t})}function useCart(){let e=(0,a.useContext)(n);if(!e)throw Error("useCart must be used within CartProvider");return e}},6630:function(e,t,r){"use strict";r.d(t,{Z:function(){return ReviewStars}});var i=r(7437),a=r(5340);function ReviewStars(e){let{rating:t}=e;return(0,i.jsx)("div",{className:"flex items-center space-x-1",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,i.jsx)(a.Z,{className:"w-4 h-4 ".concat(r<Math.floor(t)?"fill-yellow-400 text-yellow-400":"text-gray-300")},r))})}},3611:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var i=r(7437),a=r(2265),n=r(7256),s=r(6061),o=r(1628);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-105",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",smiley:"bg-gradient-to-r from-smiely-mango to-smiely-strawberry text-white hover:shadow-lg hover:scale-105",smileyOutline:"bg-white text-smiely-mango border-2 border-smiely-mango hover:bg-smiely-mango hover:text-white",smileyAccent:"bg-smiely-yuzu text-white hover:bg-smiely-yuzu/90 hover:scale-105"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-full px-3",lg:"h-11 rounded-full px-8",xl:"h-14 rounded-full px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:r,variant:a,size:s,asChild:u=!1,...d}=e,c=u?n.g7:"button";return(0,i.jsx)(c,{className:(0,o.cn)(l({variant:a,size:s,className:r})),ref:t,...d})});u.displayName="Button"},9598:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},Zb:function(){return s},aY:function(){return d},ll:function(){return l}});var i=r(7437),a=r(2265),n=r(1628);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});s.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,i.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,i.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});u.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});c.displayName="CardFooter"},2355:function(e,t,r){"use strict";r.d(t,{bQ:function(){return i}});let i=[{id:"p-mango-tango",slug:"mango-tango-toothpaste",name:"Mango Tango Toothpaste",flavor:"Mango",type:"Toothpaste",price:8.99,rating:4.8,reviews:127,imageEmoji:"\uD83E\uDD6D",gradientFrom:"from-orange-300",gradientTo:"to-orange-500",description:"Tropical mango flavor with natural whitening",badges:["Best Seller"]},{id:"p-strawberry-soft",slug:"strawberry-soft-brush",name:"Strawberry Soft Brush",flavor:"Strawberry",type:"Toothbrush",price:12.99,rating:4.9,reviews:89,imageEmoji:"\uD83C\uDF53",gradientFrom:"from-pink-300",gradientTo:"to-pink-500",description:"Gentle bristles with strawberry scent",badges:["New"]},{id:"p-yuzu-fresh",slug:"yuzu-fresh-toothpaste",name:"Yuzu Fresh Toothpaste",flavor:"Yuzu",type:"Toothpaste",price:8.99,rating:4.7,reviews:64,imageEmoji:"\uD83C\uDF4B",gradientFrom:"from-yellow-300",gradientTo:"to-yellow-500",description:"Citrus yuzu for fresh breath",badges:["Limited"]},{id:"p-blueberry-mouthwash",slug:"blueberry-mouthwash",name:"Blueberry Mouthwash",flavor:"Blueberry",type:"Mouthwash",price:15.99,rating:4.6,reviews:42,imageEmoji:"\uD83E\uDED0",gradientFrom:"from-blue-300",gradientTo:"to-blue-500",description:"Antibacterial mouthwash with natural blueberry",badges:["Popular"]},{id:"p-lavender-dream",slug:"lavender-dream-toothpaste",name:"Lavender Dream Toothpaste",flavor:"Lavender",type:"Toothpaste",price:9.99,rating:4.5,reviews:38,imageEmoji:"\uD83D\uDC9C",gradientFrom:"from-purple-300",gradientTo:"to-purple-500",description:"Calming lavender for bedtime",badges:["Premium"]},{id:"p-mint-fresh",slug:"mint-fresh-toothpaste",name:"Mint Fresh Toothpaste",flavor:"Mint",type:"Toothpaste",price:7.99,rating:4.4,reviews:156,imageEmoji:"\uD83C\uDF3F",gradientFrom:"from-emerald-300",gradientTo:"to-emerald-500",description:"Classic mint for everyday freshness",badges:["Classic"]}]},4841:function(e,t,r){"use strict";r.d(t,{O:function(){return o}});var i=r(7440),a=r(2601);let n=a.env.NEXT_PUBLIC_SUPABASE_URL,s=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=n&&s?(0,i.eI)(n,s):null},1628:function(e,t,r){"use strict";r.d(t,{cn:function(){return cn}});var i=r(7042),a=r(4769);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,i.W)(t))}},1396:function(e,t,r){e.exports=r(8326)}},function(e){e.O(0,[621,326,440,227,971,472,744],function(){return e(e.s=4912)}),_N_E=e.O()}]);